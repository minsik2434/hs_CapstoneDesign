# 잘먹고 살자

## 개요
프로젝트 명 : 잘 먹고 살자 <br/>
인원 : 4명

## 개발 목적 및 이유
최근 건강을 관리하는 인구가 증가하고 있고 음식마다 영양 정보를 확인하는 사람이 늘어나고 있어 그에 따른 식단 관리를 필요로 한다 다이어트 외에도 알레르기를 가진 사람, 고혈압, 당뇨병, 심혈관계 질환등 지병이 있는 사용자에게도 특정 영양성분에 대한 정보가 필요하며 이에 따른 음식의 상세 정보도 필요로 한다
<br/>
하지만 현재 앱들을 보았을때 식단을 기록하는데 번거로움이 있으며 알레르기나 지병등 개인에 따라 달라지는 요소를 반영하지 못하고 있다 이를 해결하고자 개인 맞춤형 식단 관리 앱을 개발하고자 하였다

## 서비스 흐름도
<img width="313" alt="서비스 흐름도" src="https://github.com/user-attachments/assets/6e40d316-c26a-48a2-8174-99be847a03f1">
<ol>
  <li>
    사용자 정보 설정
    <ol>
      <li>
        닉네임 설정
      </li>
      <li>
        성별, 키, 몸무게, 나이 설정
      </li>
      <li>
        성별, 키, 몸무게, 나이 설정
      </li>
      <li>
        알레르기, 지병 설정
      </li>
      <li>
        활동량 설정
      </li>
      <li>
        권장 칼로리 설정
      </li>
    </ol>
  </li>
  <li>
    메인 화면
    <ol>
      <li>
        당일 섭취 영양소 현황 (탄수화물, 단백질, 지방, 당류, 나트륨, 콜레스테롤, 트랜스지방, 포화지방산)
      </li>
      <li>
        당일 섭취 식단(아침, 점심, 저녁)
      </li>
    </ol>
  </li>
  <li>
    기록하기
    <ol>
      <li>
        이미지 버튼 터치시 3개의 테마(검색하기, 바코드 스캔, 사진인식) 저장 방식이 나옴
      </li>
      <li>
        음식 상세 정보(영양 성분, 원재료) 제공
      </li>
      <li>
        날짜 선택
      </li>
      <li>
        시간 선택(아침,점심,저녁)
      </li>
      <li>
        기록 하기 기능 제공
      </li>
    </ol>
  </li>
  <li>
    달력
    <ol>
      <li>
        권장 칼로리 보다 칼로리를 많이 섭취한 날은 달력에 빨간색으로 표시
      </li>
      <li>
        달력에서 특정 날짜를 선택하면 그 날짜에 어떤 음식을 섭취했는지 정보 제공
      </li>
    </ol>
  </li>
  <li>
    통계
    <ol>
      <li>
        주에 제일 많이 먹은 음식 5가지 정보를 제공
      </li>
      <li>
        그래프를 일, 주, 월별 영양 성분 통계 제공
      </li>
      <li>
        저번주 통계와 비교하여 정보를 제공
      </li>
    </ol>
  </li>
  <li>
    마이페이지
    <ol>
      <li>
        사용자 정보 재설정
      </li>
      <li>
        타임 라인 기능
      </li>
      <li>
        알람 기능
      </li>
    </ol>
  </li>
</ol>

## ERD
![image](https://github.com/user-attachments/assets/1549b185-1b75-480c-a4d2-f085beaba8c7)

## 기능 목표

### 편의성
<ul>
  <li>
    기성품일 경우 바코드 인식을 통해 성분을 확인한다
  </li>
  <li>
    음식 사진을 찍으면 그 음식이 어떤 음식인지 인식하고 평균적인 성분을 반영한다
  </li>
  <li>
    검색하기 버튼을 누르면 직접 음식의 이름을 검색하여 평균적 성분을 반영한다
  </li>
</ul>

### 음식 상세 정보 제공
<ul>
  <li>
    원재료 및 탄수화물, 단백질, 지방, 콜레스테롤, 당류, 염분 등 음식의 상세 정보를 제공한다
  </li>
  <li>
    사용자의 정보에 따라 알레르기 유발 성분이 있는 경우 주의하도록 표시한다
  </li>
</ul>

### 맞춤형 관리 시스템 제공
<ul>
  <li>
    사용자마다의 특징을 반영하여 섭취량을 조절한다
  </li>
  <li>
    통계를 통해 사용자의 섭취 현황을 표시한다
  </li>
</ul>


### 앱 주요 기능

<details>
<summary> 초기 설정 및 권장 칼로리 계산 </summary>

![image](https://github.com/user-attachments/assets/917f990d-619a-4189-b118-14f34f7d2ab7)
<br/>
사용자가 이름, 키, 몸무게, 활동량, 지병 여부등 정보를 기입하면 "Harris Benedict" 공식을 이용하여 사용자의 영양 성분 섭취 권장량을 표시한다 <br/>
지병이 있는 사용자는 여러 참고 문헌에서 가져온 계산식을 사용하여 권장량을 조절한다. 두 개 이상의 지병이 있는 경우 최솟값을 적용하였다<br/>
(Harris Benedict : 건강한 사람의 연령, 성별, 신장과 체중을 기초로 한 기초 대사량 * 활동 계수 * 부상 계수의 값)
</details>

<details>
<summary> 메인화면 </summary>

![image](https://github.com/user-attachments/assets/a5608929-d1aa-4060-b274-1a1c7426097c)
<br/>
사용자의 지병에 따른 권장 칼로리, 탄수화물, 단백질, 지방을 표시하고 전환 버튼을 누르면 권장 당, 콜레스테롤, 포화지방산, 트랜스지방 수치를 알려준다 초과하여 섭취한 경우 경고 아이콘을 표시한다<br/>
하단에는 아침,점심,저녁 별 음식 섭취 정보를표시한다. 기록 관리에서 선택한 날짜의 섭취 정보를 확인하고 길게 터치시 섭취 정보를 삭제한다
</details>

<details>
<summary> 기록하기 - 검색하기 </summary>

![image](https://github.com/user-attachments/assets/a74f18ed-85e0-4c3d-a733-ae486f1fbd95)
<br/>
음식 이름으로 검색하면 해당 이름을 포함한 음식들을 리스트로 나열하고 선택시 음식의 이미지, 성분정보, 원재료를 표시한다. 사용자의 알레르기 보유 여부에 따라 해당 알레르기가 주의해야할 원재료를 빨간 글씨로 표시한다
</details>

<details>
<summary> 기록하기 - 바코드 </summary>

<img width="115" alt="스크린샷 2024-07-16 오전 12 03 54" src="https://github.com/user-attachments/assets/d4eb7f71-19bf-4d78-83f6-a48ceab93aa3">
<br/>
 바코드 인식 버튼을 누른 후 기성 식품의 바코드를 인식하면 음식의 이미지, 성분 정보, 원재료를 표시한다. 사용자의 알레르기 보유 여부에 따라 해당 알레르기가 주의해야 할 원재료를 빨간 글씨로 표시한다.
</details>

<details>
<summary> 기록하기 - 사진인식 </summary>

<img width="113" alt="스크린샷 2024-07-16 오전 12 05 35" src="https://github.com/user-attachments/assets/bd8f4f61-84c9-4dc1-9c73-36acaf5c82fc">
<br/>
 사진 인식 버튼 클릭 시 사진 촬영 후 jpg 이미지를 Bitmap으로 변환 후 전처리한 값을 훈련된 모델에 보내면 예측된 음식 이름을 받아오고, 데이터베이스에서 해당 음식의 영양 정보를 가져온다.
</details>

<details>
<summary> 통계 </summary>
  
<img width="113" alt="스크린샷 2024-07-16 오전 12 06 49" src="https://github.com/user-attachments/assets/f8cbda2a-5837-4f8d-8e82-229613ed03ec">
<br/>
  달력 화면에서 사용자가 칼로리를 초과하여 먹은 날을 빨간 박스로 표시한다. 해당 날짜를 선택하면 그 날에 섭취한 음식 정보를 가져온다. <br/>
  통계 화면에서 이번 주에 섭취한 음식 Top 5를 보여주고, 각종 성분의 섭취량을 그래프로 일간, 주간, 월간으로 보여준다.<br/>
  주간 섭취량을 비교하여 차이를 표시한다.

</details>


<details>
<summary> 타임라인 </summary>
  
  <img width="114" alt="스크린샷 2024-07-16 오전 12 09 08" src="https://github.com/user-attachments/assets/1d7b0852-483f-4add-b03b-b02f9255722c">
  <br/>
 사용자의 개인 정보를 표시하고 타임라인을 통해 초과하여 섭취한 성분을 확인할 수 있다. <br/>
 설정 버튼 클릭 시 사용자의 정보 및 알레르기를 재설정한다. <br/>

</details>

## 개발환경
1. Android Studio
2. Tensorflow
3. Python
4. git
5. SQLite

## 사용된 API 및 기술
1. Zxing Library
2. TensorFlow - MobileNetV2 Model
3. 한국 식품 안전 관리 인증원_ HACCUP 제품 이미지 및 포장지 표기 정보
4. 바코드 연계 제품 정보
5. 식품의약품안전처 공공데이터
6. 테스트 기기 - Galaxy S20 Ultra

## 참고 문헌
1. 보건 의료 빅데이터 개방 시스템. 국민 관심 질병 통계 2023.04.28
   https://opendata.hira.or.kr/home.do
2. 안드로이드 스튜디오를 활용한 안드로이드 프로그래밍 7판
3. Do it 안드로이드 앱 프로그래밍
4. Zxing
   https://github.com/zxing/zxing
5. 한국 식품 안전관리 인증원
   https://www.data.go.kr/data/15033307/openapi.do
6. 김정훈, 임경은, 강선영, 이가영, 박태진, 김진승 - '한국 성인의 하루 나트륨 섭취량과 비만의 연관성"
   “ 「Korean J Health Promot Vol. 15, No. 4」
7. 김종화 - 당뇨병 환자의 영양관리
   「Hanyang Medical Reviews Vol. 31 No. 4」
